{% extends 'baseBack.html.twig' %}

{% block title %}DÃ©tails RÃ©servation #{{ reservation.id }}{% endblock %}

{% block body %}
<div class="container my-5">
    <div class="card shadow-lg border-0 rounded-4 p-4">

        <!-- ğŸ·ï¸ Titre principal -->
        <h1 class="text-center mb-4 text-primary fw-bold">
            ğŸš– RÃ©servation #{{ reservation.id }}
        </h1>

        <!-- ğŸ‘¤ Informations Client -->
        <hr>
        <h4 class="text-primary mb-3">Informations Client</h4>
        <div class="row text-center">
            <div class="col-md-3 mb-3">
                <h6 class="text-muted">Nom complet</h6>
                <p class="fw-semibold">{{ reservation.firstName }} {{ reservation.lastName }}</p>
            </div>
            <div class="col-md-3 mb-3">
                <h6 class="text-muted">TÃ©lÃ©phone</h6>
                <p class="fw-semibold">{{ reservation.tel ?: 'â€”' }}</p>
            </div>
            <div class="col-md-3 mb-3">
                <h6 class="text-muted">WhatsApp</h6>
                <p class="fw-semibold">{{ reservation.whatsappNumber ?: 'â€”' }}</p>
            </div>
            <div class="col-md-3 mb-3">
                <h6 class="text-muted">Email</h6>
                <p class="fw-semibold">{{ reservation.email ?: 'â€”' }}</p>
            </div>
        </div>

        <!-- ğŸš— DÃ©tails du Transfert -->
        <hr>
        <h4 class="text-primary mb-3">DÃ©tails du Transfert</h4>
        <div class="row text-center">
            <div class="col-md-4 mb-3">
                <h6 class="text-muted">Trajet</h6>
                <p class="fw-semibold">
                    {{ reservation.trajetTransfert.lieuDepart }} â†’ {{ reservation.trajetTransfert.lieuArrivee }}
                </p>
            </div>
            <div class="col-md-4 mb-3">
                <h6 class="text-muted">Type de transfert</h6>
                <p class="fw-semibold">{{ reservation.transferType.value }}</p>
            </div>
            <div class="col-md-4 mb-3">
                <h6 class="text-muted">Nombre de personnes</h6>
                <p class="fw-semibold">{{ reservation.persons }}</p>
            </div>
        </div>

        <div class="text-center mb-4">
            <span class="badge bg-success fs-6 px-3 py-2">
                ğŸ’° {{ reservation.prixTotal }} TND
            </span>
        </div>

        <!-- ğŸ“… Pick-up -->
        <hr>
        <h4 class="text-primary mb-3">ğŸ“ DÃ©tails du Pick-up</h4>
        <div class="row text-center">
            <div class="col-md-3 mb-3">
                <h6 class="text-muted">Date</h6>
                <p class="fw-semibold">{{ reservation.pickupDate ? reservation.pickupDate|date('d/m/Y') : 'â€”' }}</p>
            </div>
            <div class="col-md-3 mb-3">
                <h6 class="text-muted">Heure</h6>
                <p class="fw-semibold">{{ reservation.pickupTime ? reservation.pickupTime|date('H:i') : 'â€”' }}</p>
            </div>
            <div class="col-md-3 mb-3">
                <h6 class="text-muted">Lieu de dÃ©part</h6>
                <p class="fw-semibold">
                    {{ reservation.pickupLocation 
                        ?: (reservation.trajetTransfert ? reservation.trajetTransfert.lieuDepart : 'â€”') }}
                </p>
            </div>
            <div class="col-md-3 mb-3">
                <h6 class="text-muted">Destination</h6>
                <p class="fw-semibold">
                    {{ reservation.dropoffLocation 
                        ?: (reservation.trajetTransfert ? reservation.trajetTransfert.lieuArrivee : 'â€”') }}
                </p>
            </div>
        </div>

        <!-- ğŸ” Retour â€” affichÃ© uniquement si le type de transfert = "return" -->
        {% if reservation.transferType.value == 'return' %}
            <hr>
            <h4 class="text-primary mb-3">ğŸ” DÃ©tails du Retour</h4>
            <div class="row text-center">
                <div class="col-md-3 mb-3">
                    <h6 class="text-muted">Date</h6>
                    <p class="fw-semibold">{{ reservation.returnPickupDate ? reservation.returnPickupDate|date('d/m/Y') : 'â€”' }}</p>
                </div>
                <div class="col-md-3 mb-3">
                    <h6 class="text-muted">Heure</h6>
                    <p class="fw-semibold">{{ reservation.returnPickupTime ? reservation.returnPickupTime|date('H:i') : 'â€”' }}</p>
                </div>
                <div class="col-md-3 mb-3">
                    <h6 class="text-muted">Lieu de dÃ©part</h6>
                    <p class="fw-semibold">{{ reservation.returnPickupLocation ?: 'â€”' }}</p>
                </div>
                <div class="col-md-3 mb-3">
                    <h6 class="text-muted">Destination</h6>
                    <p class="fw-semibold">{{ reservation.returnDropoffLocation ?: 'â€”' }}</p>
                </div>
            </div>
        {% endif %}

        <!-- âœˆï¸ Autres informations -->
        <hr>
        <h4 class="text-primary mb-3">Autres Informations</h4>
        <div class="row text-center">
            <div class="col-md-4 mb-3">
                <h6 class="text-muted">NumÃ©ro de vol</h6>
                <p class="fw-semibold">{{ reservation.flightNumber ?: 'â€”' }}</p>
            </div>
            <div class="col-md-4 mb-3">
                <h6 class="text-muted">Commentaires</h6>
                <p class="fw-semibold">{{ reservation.comments ?: 'Aucun' }}</p>
            </div>
            <div class="col-md-4 mb-3">
                <h6 class="text-muted">CrÃ©Ã© le</h6>
                <p class="fw-semibold">{{ reservation.createdAt|date('d/m/Y H:i') }}</p>
            </div>
        </div>

        <!-- ğŸ“Œ Statut -->
        <hr>
        <div class="text-center mt-4">
            <h6 class="text-muted">Statut actuel</h6>
            {% if reservation.statut == 'en_attente' %}
                <span class="badge bg-warning text-dark fs-6 px-3 py-2">â³ En attente</span>
            {% elseif reservation.statut == 'confirmee' %}
                <span class="badge bg-success fs-6 px-3 py-2">âœ… ConfirmÃ©e</span>
            {% else %}
                <span class="badge bg-danger fs-6 px-3 py-2">âŒ AnnulÃ©e</span>
            {% endif %}
        </div>

    </div>

    <!-- ğŸ”™ Bouton retour -->
    <div class="text-center mt-4">
        <a href="{{ path('back_reservation_transfert_index') }}" class="btn btn-secondary px-4">
            â†©ï¸ Retour Ã  la liste
        </a>
    </div>
</div>
{% endblock %}
