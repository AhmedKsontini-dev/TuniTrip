{% extends 'baseFront.html.twig' %}

{% block title %}Mes Coups de Cœur & Excursions Favorites en Tunisie - TuniTrip{% endblock %}

{% block metaDescription %}
    <meta name="description" content="Découvrez vos excursions préférées sauvegardées sur TuniTrip. Retrouvez et gérez votre liste de favoris pour planifier facilement votre prochaine aventure en Tunisie.">
{% endblock %}

{% block stylesheet %}
    <link rel="stylesheet" href="{{ asset('assetsFront/css/favoris.css') }}">
{% endblock %}

{% block body %}

<!-- Hero Section -->
<div class="favorites-hero">
    <div class="favorites-hero-bg"></div>
    <div class="favorites-hero-content">
        <h1 class="favorites-title">Vos Excursions Préférées en Tunisie</h1>
        <p class="favorites-subtitle">Retrouvez toutes vos excursions préférées et planifiez votre prochaine aventure en Tunisie.</p>
    </div>
</div>

<div class="container favorites-container">
    <div class="row">
        {% if favoris|length > 0 %}
            {% for favori in favoris %}
                {% set excursion = favori.excursion %}
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="fav-card">
                        <div class="fav-card-img-wrapper">
                            <img src="{{ excursion.imagePrincipalePath }}" alt="{{ excursion.titre }}" class="fav-card-img">
                            <span class="fav-badge">{{ excursion.categorie }}</span>
                            
                            <!-- Remove/Unlike Button -->
                            <button class="fav-remove-btn favorite-btn" 
                                    data-excursion-id="{{ excursion.id }}" 
                                    data-action="remove-favoris"
                                    title="Retirer des favoris">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        
                        <div class="fav-card-body">
                            <h3 class="fav-card-title">{{ excursion.titre }}</h3>
                            <div class="fav-price">{{ excursion.prixParPersonne }} TND <span>/pers</span></div>
                            
                            <p class="fav-desc">{{ excursion.description|slice(0, 100) }}...</p>
                            
                            <div class="fav-meta">
                                <span class="fav-meta-item"><i class="fas fa-map-marker-alt"></i> {{ excursion.localisation }}</span>
                                <span class="fav-meta-item"><i class="far fa-clock"></i> {{ excursion.duree }} jours</span>
                            </div>
                            
                            <a href="{{ path('app_front_excursion_details', {'id': excursion.id}) }}" class="fav-btn">
                                Voir les détails <i class="fas fa-arrow-right ml-2"></i>
                            </a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="col-12">
                <div class="empty-state">
                    <div class="empty-icon">
                        <i class="far fa-heart"></i>
                    </div>
                    <h2 class="empty-title">Votre liste d'envies est vide</h2>
                    <p class="empty-text">Vous n'avez pas encore sauvegardé d'excursions. Explorez nos offres incroyables et gardez vos préférées ici pour plus tard.</p>
                    <a href="{{ path('app_front_excursions_list') }}" class="btn-animated-primary excursion-details-btn">
                        Découvrir les excursions
                    </a>
                </div>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block script %}
    <script src="{{ asset('assetsFront/js/favoris.js') }}"></script>
{% endblock %}

